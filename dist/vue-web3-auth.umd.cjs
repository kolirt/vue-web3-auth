(function(c,C){typeof exports=="object"&&typeof module<"u"?C(exports,require("@wagmi/core/chains"),require("vue"),require("@wagmi/core"),require("@web3modal/ethereum"),require("@web3modal/html"),require("js-event-bus")):typeof define=="function"&&define.amd?define(["exports","@wagmi/core/chains","vue","@wagmi/core","@web3modal/ethereum","@web3modal/html","js-event-bus"],C):(c=typeof globalThis<"u"?globalThis:c||self,C(c["vue-web3-auth"]={},c.wagmiCoreChains,c.vue,c.wagmiCore,c.web3modalEthereum,c.web3modalHtml,c.jsEventBus))})(this,function(c,C,s,f,$,M,S){"use strict";function T(n){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const a in n)if(a!=="default"){const i=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}return e.default=n,Object.freeze(e)}const U=T(C);var D={id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc0497E381f536Be9ce14B0dD3817cBcAe57d2F62",blockCreated:16966585},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}};function G(n){return n}const p=D,t=s.reactive({autoInit:!0,projectId:"",chains:[p],autoConnect:!0,disconnectUnknownChain:!0,reconnectToChain:!0,logEnabled:!1,web3modalOptions:{themeMode:"light",themeVariables:{}}});function v(n){"autoInit"in n&&(t.autoInit=n.autoInit),"projectId"in n&&(t.projectId=n.projectId),"chains"in n&&(t.chains=n.chains),"autoConnect"in n&&(t.autoConnect=n.autoConnect),"disconnectUnknownChain"in n&&(t.disconnectUnknownChain=n.disconnectUnknownChain),"reconnectToChain"in n&&(t.reconnectToChain=n.reconnectToChain),"logEnabled"in n&&(t.logEnabled=n.logEnabled),"web3modalOptions"in n&&("themeMode"in n.web3modalOptions&&(t.web3modalOptions.themeMode=n.web3modalOptions.themeMode),"themeVariables"in n.web3modalOptions&&(t.web3modalOptions.themeVariables=n.web3modalOptions.themeVariables))}const l=s.reactive({bufferChain:null,currentChain:null}),_=s.computed(()=>l.currentChain?l.currentChain:t.chains[0]);function q(){return t.chains}async function W(n){var e;d.value||w(),await((e=I.client)==null?void 0:e.switchNetwork({chainId:n.id}))}async function R(){var n;d.value||w(),await((n=d.value)==null?void 0:n.openModal({route:"SelectNetwork"}))}function r(...n){t.logEnabled&&console.log("[WC]",...n)}var o=(n=>(n.Connected="connected",n.Disconnected="disconnect",n.ChainSwitched="chain_switched",n.UnknownChain="unknown_chain",n.ModalStateChanged="modal_state_changed",n))(o||{});const j=new S;function h(n,...e){n===o.Connected||n===o.Disconnected?(l.currentChain=l.bufferChain,u.currentAccount=u.bufferAccount):n===o.ChainSwitched&&(l.currentChain=l.bufferChain),j.emit(n,null,...e)}function F(n,e){j.on(n,e),t.logEnabled&&r(`Subscribe for ${n} event.`)}function N(n,e){j.detach(n,e),t.logEnabled&&r(`Unsubscribe for ${n} event.`)}const d=s.ref(null);function P(n){var e;d.value=new M.Web3Modal({projectId:t.projectId,...(t==null?void 0:t.web3modalOptions)||[]},n),(e=d.value)==null||e.subscribeModal(({open:a})=>{h(o.ModalStateChanged,a)})}const u=s.reactive({bufferAccount:null,currentAccount:null}),m=s.reactive({connected:!1,address:void 0,shortAddress:void 0});async function k(){await f.disconnect()}async function V(n){var e,a;d.value||w(),n instanceof Event&&(n=t.chains[0]),(e=d.value)==null||e.setDefaultChain(n||t.chains[0]),await((a=d.value)==null?void 0:a.openModal({route:"ConnectWallet"}))}async function A(){var n;d.value||w(),await((n=d.value)==null?void 0:n.openModal({route:"Account"}))}function y(n=""){return`${n.slice(0,5)}...${n.slice(-4)}`}s.watch(()=>u.currentAccount,n=>{n?(m.connected=!0,m.address=n.address,m.shortAddress=y(n.address)):(m.connected=!1,m.address=void 0,m.shortAddress=void 0)});let E;const I=s.reactive({client:null});function b(n){return String(n).toLowerCase()}async function H([n,e],[a,i]){if(t.disconnectUnknownChain&&(!a&&t.disconnectUnknownChain||a)&&e&&!t.chains.some(g=>g.id===e.id)){await k(),i&&(h(o.Disconnected),r(`account ${n.address} disconnected from ${b(i.name)} chain.`)),h(o.UnknownChain,{chain:e}),r("switched to unsupported chain.");return}(a==null?void 0:a.address)!==(n==null?void 0:n.address)&&!(i!=null&&i.unsupported)&&(a&&(h(o.Disconnected),r(`account ${a.address} disconnected from ${b(i.name)} chain.`)),n&&(h(o.Connected,{chain:l.bufferChain,account:u.bufferAccount}),r(`account ${n.address} connected to ${b(e.name)} chain.`))),i&&e&&i.id!==e.id&&(t.reconnectToChain?(h(o.Disconnected),r(`account ${a.address} disconnected from ${b(i.name)} chain.`),h(o.Connected,{chain:l.bufferChain,account:u.bufferAccount}),r(`account ${n.address} connected to ${b(e.name)} chain.`)):(h(o.ChainSwitched,{chain:e}),r(`account ${n.address} switched to ${b(e.name)} chain.`)))}function L([n,e],[a,i]){clearTimeout(E),E=setTimeout(H,200,[n,e],[a,i])}function w(){if(d.value)return;const{publicClient:n}=f.configureChains(s.toRaw(t.chains),[$.w3mProvider({projectId:t.projectId})]),e=f.createConfig({autoConnect:t.autoConnect,connectors:$.w3mConnectors({projectId:t.projectId,version:2,chains:s.toRaw(t.chains)}),publicClient:n});f.watchNetwork(i=>{var g;(g=i.chain)!=null&&g.unsupported&&(i.chain.name="Unsupported"),l.bufferChain=i.chain||null}),f.watchAccount(i=>{u.bufferAccount=i.address?i:null}),s.watch([()=>u.bufferAccount,()=>l.bufferChain],L);const a=new $.EthereumClient(e,s.toRaw(t.chains));I.client=a,P(a)}function z(n){return{install(){v(n),w()}}}c.Chains=U,c.$off=N,c.$on=F,c.Event=o,c.account=m,c.accountDetails=A,c.chain=_,c.connect=V,c.createWeb3Auth=z,c.disconnect=k,c.getAvailableChains=q,c.selectChain=R,c.shortAddressFilter=y,c.switchChain=W,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});
