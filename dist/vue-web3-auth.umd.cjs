(function(t,g){typeof exports=="object"&&typeof module<"u"?g(exports,require("@wagmi/core/chains"),require("vue"),require("@wagmi/core"),require("@web3modal/html"),require("js-event-bus"),require("@web3modal/ethereum"),require("viem")):typeof define=="function"&&define.amd?define(["exports","@wagmi/core/chains","vue","@wagmi/core","@web3modal/html","js-event-bus","@web3modal/ethereum","viem"],g):(t=typeof globalThis<"u"?globalThis:t||self,g(t["vue-web3-auth"]={},t.wagmiCoreChains,t.vue,t.wagmiCore,t.web3modalHtml,t.jsEventBus,t.web3modalEthereum,t.viem))})(this,function(t,g,u,s,G,S,M,R){"use strict";function _(e){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const a in e)if(a!=="default"){const c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,c.get?c:{enumerable:!0,get:()=>e[a]})}}return n.default=e,Object.freeze(n)}const D=_(g);function H(){return function(e){return e.rpcUrls.public.http[0]?{chain:e,rpcUrls:e.rpcUrls.public}:null}}var W={id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc0497E381f536Be9ce14B0dD3817cBcAe57d2F62",blockCreated:16966585},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}};function q(e,n){return{...e,formatters:n==null?void 0:n.formatters,serializers:n==null?void 0:n.serializers}}const V=q(W),i=u.reactive({autoInit:!0,projectId:"",chains:[V],autoConnect:!0,disconnectUnknownChain:!0,reconnectToChain:!0,logEnabled:!1,enableCustomProvider:!1,web3modalOptions:{themeMode:"light",themeVariables:{}}});function z(e){"autoInit"in e&&(i.autoInit=e.autoInit),"projectId"in e&&(i.projectId=e.projectId),"chains"in e&&(i.chains=e.chains),"autoConnect"in e&&(i.autoConnect=e.autoConnect),"disconnectUnknownChain"in e&&(i.disconnectUnknownChain=e.disconnectUnknownChain),"reconnectToChain"in e&&(i.reconnectToChain=e.reconnectToChain),"logEnabled"in e&&(i.logEnabled=e.logEnabled),"enableCustomProvider"in e&&(i.enableCustomProvider=e.enableCustomProvider),"web3modalOptions"in e&&("themeMode"in e.web3modalOptions&&(i.web3modalOptions.themeMode=e.web3modalOptions.themeMode),"themeVariables"in e.web3modalOptions&&(i.web3modalOptions.themeVariables=e.web3modalOptions.themeVariables))}function y(...e){i.logEnabled&&console.log("[WC]",...e)}var l=(e=>(e.Connected="connected",e.Disconnected="disconnect",e.ChainSwitched="chain_switched",e.UnknownChain="unknown_chain",e.ModalStateChanged="modal_state_changed",e))(l||{});let $;const A=u.reactive({client:null});function C(e){return String(e).toLowerCase()}async function L([e,n],[a,c]){if(i.disconnectUnknownChain&&(!a&&i.disconnectUnknownChain||a)&&n&&!i.chains.some(r=>r.id===n.id)){await N(),c&&(f(l.Disconnected),y(`account ${e.address} disconnected from ${C(c.name)} chain.`)),f(l.UnknownChain,{chain:n}),y("switched to unsupported chain.");return}(a==null?void 0:a.address)!==(e==null?void 0:e.address)&&!(c!=null&&c.unsupported)&&(a&&(f(l.Disconnected),y(`account ${a.address} disconnected from ${C(c.name)} chain.`)),e&&(f(l.Connected,{chain:h.bufferChain,account:b.bufferAccount}),y(`account ${e.address} connected to ${C(n.name)} chain.`))),c&&n&&c.id!==n.id&&(i.reconnectToChain?(f(l.Disconnected),y(`account ${a.address} disconnected from ${C(c.name)} chain.`),f(l.Connected,{chain:h.bufferChain,account:b.bufferAccount}),y(`account ${e.address} connected to ${C(n.name)} chain.`)):(f(l.ChainSwitched,{chain:n}),y(`account ${e.address} switched to ${C(n.name)} chain.`)))}function J([e,n],[a,c]){clearTimeout($),$=setTimeout(L,200,[e,n],[a,c])}function v(){if(d.value)return;const e=u.toRaw(i.chains),n=[];i.enableCustomProvider?n.push(H()):n.push(M.w3mProvider({projectId:i.projectId}));const{publicClient:a,webSocketPublicClient:c}=s.configureChains(e,n),r=s.createConfig({autoConnect:i.autoConnect,connectors:M.w3mConnectors({projectId:i.projectId,chains:e}),publicClient:a,webSocketPublicClient:c});s.watchNetwork(p=>{var I;(I=p.chain)!=null&&I.unsupported&&(p.chain.name="Unsupported"),h.bufferChain=p.chain||null}),s.watchAccount(p=>{b.bufferAccount=p.address?p:null}),u.watch([()=>b.bufferAccount,()=>h.bufferChain],J);const w=new M.EthereumClient(r,e);A.client=w,Z(w)}const b=u.reactive({bufferAccount:null,currentAccount:null}),m=u.reactive({connected:!1,address:void 0,shortAddress:void 0});async function N(){await s.disconnect()}async function K(e){var n,a;d.value||v(),e instanceof Event&&(e=i.chains[0]),(n=d.value)==null||n.setDefaultChain(e||i.chains[0]),await((a=d.value)==null?void 0:a.openModal({route:"ConnectWallet"}))}async function Q(){var e;d.value||v(),await((e=d.value)==null?void 0:e.openModal({route:"Account"}))}function U(e=""){return`${e.slice(0,5)}...${e.slice(-4)}`}u.watchEffect(()=>{b.currentAccount?(m.connected=!0,m.address=b.currentAccount.address,m.shortAddress=U(b.currentAccount.address)):(m.connected=!1,m.address=void 0,m.shortAddress=void 0)});const P=new S;function f(e,...n){e===l.Connected||e===l.Disconnected?(h.currentChain=h.bufferChain,b.currentAccount=b.bufferAccount):e===l.ChainSwitched&&(h.currentChain=h.bufferChain),setTimeout(P.emit,0,e,null,...n)}function X(e,n){P.on(e,n),i.logEnabled&&y(`Subscribe for ${e} event.`)}function Y(e,n){P.detach(e,n),i.logEnabled&&y(`Unsubscribe for ${e} event.`)}const d=u.ref(null);function Z(e){var n;d.value=new G.Web3Modal({projectId:i.projectId,...(i==null?void 0:i.web3modalOptions)||[]},e),(n=d.value)==null||n.subscribeModal(({open:a})=>{f(l.ModalStateChanged,a)})}const h=u.reactive({bufferChain:null,currentChain:null}),o=u.computed(()=>h.currentChain?h.currentChain:i.chains[0]);function O(){return i.chains}async function x(e){var n;d.value||v(),await((n=A.client)==null?void 0:n.switchNetwork({chainId:e.id}))}async function B(){var e;d.value||v(),await((e=d.value)==null?void 0:e.openModal({route:"SelectNetwork"}))}function j(e){return s.fetchBalance({chainId:e.chainId||o.value.id,address:e.address,token:e.token,formatUnits:e.formatUnits})}function ee(e,n){const a=u.ref(!1),c=u.ref(!1),r=u.reactive({decimals:0,formatted:"",symbol:"",value:0n});let w,p,I=e.chainId||o.value.id;const k={disableAutoFetch:(n==null?void 0:n.disableAutoFetch)||!1,autoReloadTime:(n==null?void 0:n.autoReloadTime)||3e4,disableAutoReload:(n==null?void 0:n.disableAutoReload)||!1};async function E(){(!c.value||!a.value)&&(c.value=!0,await j(e).then(T=>{(T.value!==r.value||!a.value)&&(r.decimals=T.decimals,r.formatted=T.formatted,r.symbol=T.symbol,r.value=T.value)}).finally(()=>{a.value=!0,c.value=!1,Te()}))}function F(){return clearTimeout(w),E()}function fe(){k.disableAutoReload=!0}function Te(){k.disableAutoReload!==!0&&(w=setTimeout(F,k.autoReloadTime||3e4))}function Ce(){a.value=!1,r.decimals=0,r.formatted="",r.symbol="",r.value=0n}function ve(){clearTimeout(p),I=o.value.id,Ce(),F()}return k.disableAutoFetch!==!0&&E(),e.chainId===void 0&&u.watch(()=>o.value.id,T=>{T!==I&&(p=setTimeout(ve))}),{loaded:a,fetching:c,data:r,fetch:E,reload:F,disableAutoReload:fe}}function ne(e){return s.fetchBlockNumber({chainId:(e==null?void 0:e.chainId)||o.value.id})}async function te(e){return s.readContract({chainId:e.chainId||o.value.id,address:e.address,abi:e.abi,functionName:e.functionName,args:e.args||[],account:e.account||m.address,blockNumber:e.blockNumber,blockTag:e.blockTag})}async function ae(e){const{hash:n}=await s.writeContract({chainId:e.chainId||o.value.id,address:e.address,abi:e.abi,functionName:e.functionName,args:e.args||[],account:e.account||m.address,gas:e.gas,gasPrice:e.gasPrice,maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas,nonce:e.nonce,value:e.value});function a(){return s.waitForTransaction({chainId:e.chainId||o.value.id,hash:n,confirmations:e.confirmations||1})}return{hash:n,wait:a}}async function ie(e){return await s.getPublicClient({chainId:e.chainId||o.value.id}).estimateContractGas({address:e.address,abi:e.abi,functionName:e.functionName,args:e.args||[],account:e.account||m.address,gasPrice:e.gasPrice,maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas,nonce:e.nonce,value:e.value})}function ce(e,n){const a=[];return n.logs.forEach(c=>{try{a.push(R.decodeEventLog({abi:e.abi,topics:c.topics,data:c.data}))}catch{}}),a}function se(e,n){return s.watchContractEvent({chainId:(e==null?void 0:e.chainId)||o.value.id,address:e.address,abi:e.abi,eventName:e.eventName},n)}function oe(e){return s.fetchFeeData({chainId:(e==null?void 0:e.chainId)||o.value.id,formatUnits:e==null?void 0:e.formatUnits})}function re(e){return s.signMessage({message:e})}async function ue(e){const n=[];return e.calls.forEach(a=>{a.calls.forEach(([c,r])=>{n.push({address:a.contractAddress,abi:a.abi,functionName:c,args:r})})}),await s.multicall({chainId:e.chainId,contracts:n,multicallAddress:e.multicallAddress,blockTag:e.blockTag,blockNumber:e.blockNumber,batchSize:e.batchSize,allowFailure:e.allowFailure})}function le(e){return s.fetchToken({chainId:e.chainId||o.value.id,address:e.address,formatUnits:e.formatUnits})}function de(e){return s.fetchTransaction({chainId:e.chainId||o.value.id,hash:e.hash})}function me(e){return s.getPublicClient({chainId:e.chainId||o.value.id}).getTransactionReceipt({hash:e.hash})}async function he(e){const{hash:n}=await s.sendTransaction({chainId:e.chainId||o.value.id,to:e.to,account:e.account,gas:e.gas,gasPrice:e.gasPrice,maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas,nonce:e.nonce,value:e.value});return s.waitForTransaction({chainId:e.chainId||o.value.id,hash:n,confirmations:e.confirmations||1})}const ye=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"},{internalType:"uint8",name:"decimals_",type:"uint8"},{internalType:"uint256",name:"initialBalance_",type:"uint256"},{internalType:"address payable",name:"feeReceiver_",type:"address"}],stateMutability:"payable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],be=[{inputs:[{components:[{internalType:"address",name:"target",type:"address"},{internalType:"bytes",name:"callData",type:"bytes"}],internalType:"struct Multicall.Call[]",name:"calls",type:"tuple[]"}],name:"aggregate",outputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"},{internalType:"bytes[]",name:"returnData",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getBlockHash",outputs:[{internalType:"bytes32",name:"blockHash",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockCoinbase",outputs:[{internalType:"address",name:"coinbase",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockDifficulty",outputs:[{internalType:"uint256",name:"difficulty",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockGasLimit",outputs:[{internalType:"uint256",name:"gaslimit",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"}],name:"getEthBalance",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLastBlockHash",outputs:[{internalType:"bytes32",name:"blockHash",type:"bytes32"}],stateMutability:"view",type:"function"}];function pe(e){return{install(){z(e),v()}}}t.Chains=D,t.$off=Y,t.$on=X,t.Events=l,t.account=m,t.accountDetails=Q,t.chain=o,t.connect=K,t.createWeb3Auth=pe,t.disconnect=N,t.erc20ABI=ye,t.estimateWriteContractGas=ie,t.fetchBalance=j,t.fetchBlockNumber=ne,t.fetchGasPrice=oe,t.fetchToken=le,t.fetchTransaction=de,t.fetchTransactionReceipt=me,t.getAvailableChains=O,t.init=v,t.multicall=ue,t.multicallABI=be,t.parseEvents=ce,t.readContract=te,t.selectChain=B,t.sendTransaction=he,t.shortAddressFilter=U,t.signMessage=re,t.switchChain=x,t.useFetchBalance=ee,t.watchContractEvent=se,t.writeContract=ae,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
